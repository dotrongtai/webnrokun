<%- include("../partials/header", { title: "ÄÄƒng kÃ½ tÃ i khoáº£n" }) %>
<style>
  .form-group {
  margin-bottom: 14px;
}

.form-group label {
  display: block;
  margin-bottom: 6px;
  font-size: 14px;
  color: #111;
}

.form-group input {
  width: 100%;
  padding: 11px;
  border-radius: 6px;
  border: 1px solid #ccc;
  outline: none;
  font-size: 15px;
  box-sizing: border-box;
}

.form-group input:focus {
  border-color: #2196F3;
  box-shadow: 0 0 0 3px rgba(33,150,243,0.25);
}

.password-wrap {
  position: relative;
}

.password-wrap input {
  padding-right: 42px; /* chá»«a chá»— icon */
}

.toggle-pass {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
  user-select: none;
  font-size: 18px;
  opacity: 0.75;
  transition: 0.2s;
}

.toggle-pass:hover {
  opacity: 1;
  transform: translateY(-50%) scale(1.15);
}

.btn-submit {
  width: 100%;
  padding: 12px;
  border: none;
  background: #d6a63d;
  color: white;
  border-radius: 6px;
  font-size: 16px;
  cursor: pointer;
  font-weight: bold;
  transition: 0.2s;
}

.btn-submit:hover {
  filter: brightness(1.05);
}

</style>

<div class="snow">
  <% for (let i = 0; i < 35; i++) { %>
    <span style="
      left:<%= Math.random()*100 %>%;
      animation-duration:<%= 3 + Math.random()*5 %>s;
      animation-delay:<%= Math.random()*3 %>s;
    "></span>
  <% } %>
</div>

<div style="
  max-width:900px;
  margin:25px auto;
  background:linear-gradient(to bottom, #42c7dd, #07a1c2);
  padding:22px;
  border-radius:10px;
  position:relative;
  z-index:3;
">

  <h2 style="text-align:center; color:#fff;">ÄÄ‚NG KÃ</h2>

  <div style="
    background:#ffffffd8;
    padding:20px;
    max-width:500px;
    margin:auto;
    border-radius:8px;
  ">
  <form action="/register" method="POST">

  <div class="form-group">
    <label><b>TÃ i khoáº£n:</b></label>
    <input type="text" name="username" required minlength="3" maxlength="20">
  </div>

  <div class="form-group">
    <label><b>Máº­t kháº©u:</b></label>
    <div class="password-wrap">
      <input type="password" name="password" required minlength="5" maxlength="20" id="password">
      <span class="toggle-pass" data-target="password">ğŸ‘ï¸</span>
    </div>
  </div>

  <div class="form-group">
    <label><b>Nháº­p láº¡i máº­t kháº©u:</b></label>
    <div class="password-wrap">
      <input type="password" name="repassword" required minlength="5" maxlength="20" id="repassword">
      <span class="toggle-pass" data-target="repassword">ğŸ‘ï¸</span>
    </div>
  </div>

  <button type="submit" class="btn-submit">
    ÄÄƒng kÃ½ ngay
  </button>

</form>

    <% if (msg) { %>
      <div style="
        margin-top:15px; padding:10px; background:#fff3cd;
        border-radius:6px; border:1px solid #ffeeba; color:#856404;
        text-align:center; font-weight:bold;
      ">
        <%= msg %>
      </div>
    <% } %>

  </div>

</div>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".toggle-pass").forEach(icon => {
      icon.addEventListener("click", () => {
        const targetId = icon.getAttribute("data-target");
        const input = document.getElementById(targetId);

        if (!input) return;

        if (input.type === "password") {
          input.type = "text";
          icon.textContent = "ğŸ™ˆ";
        } else {
          input.type = "password";
          icon.textContent = "ğŸ‘ï¸";
        }
      });
    });
  });
</script>

<%- include("../partials/footer") %>
